:root{
  --space-bg-1: #030415;
  --space-bg-2: #071224;
  --accent-red: #c51111;
  --accent-blue: #132eD1;
  --accent-cyan: #58d7f0;
  --accent-green: #117f2d;
  --accent-yellow: #ffc926;
  --surface: #0f1724;
  --panel-edge: rgba(255,255,255,0.06);
  --text: #E6E7EB;
  --muted: #AEB2BD;
  --font-main: "Varela Round", "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --fw-700: 700;
  --fs-sm: .875rem;
  --fs-md: 1rem;
  --fs-lg: 1.125rem;
  --space-xs: .25rem;
  --space-sm: .5rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --radius-1: .6rem;
  --radius-2: 1rem;
  --shadow-1: 0 8px 20px rgba(3,6,12,0.6);
  --ease-fast: 160ms;
  --ease-med: 320ms;
}

html[data-theme="light"]{
  --space-bg-1: #f6f8fb;
  --space-bg-2: #eef3fb;
  --surface: #ffffff;
  --panel-edge: rgba(0,0,0,0.06);
  --text: #0b1220;
  --muted: #42505a;
}

*{box-sizing:border-box;}
html,body{height:100%;}
body{
  margin:0;
  font-family:var(--font-main);
  color:var(--text);
  background:linear-gradient(180deg,var(--space-bg-1) 0%,var(--space-bg-2) 60%);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  line-height:1.4;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:clamp(1rem,3vw,2.25rem);
}

input[type=number]::-webkit-inner-spin-button { 
    -webkit-appearance: none;
    
}
input[type=number] { 
   -moz-appearance: textfield;
   appearance: textfield;

}

.visually-hidden{
  position:absolute!important;
  width:1px;
  height:1px;
  padding:0;
  margin:-1px;
  overflow:hidden;
  clip:rect(0 0 0 0);
  white-space:nowrap;
  border:0;
  
}

.space-layer{
  position:fixed;
  inset:0;
  z-index:-2;
  background:radial-gradient(1200px 600px at 20% 10%,rgba(88,54,153,0.12),transparent 20%),
             radial-gradient(1000px 600px at 85% 30%,rgba(44,178,168,0.08),transparent 20%),
             url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><g fill="%23fff" fill-opacity="0.14"><circle cx="10" cy="20" r="1"/><circle cx="80" cy="60" r="1"/><circle cx="190" cy="40" r="1"/><circle cx="30" cy="150" r="1"/></g></svg>');
  background-size:cover;
  pointer-events:none;
  will-change:transform;
  animation:starsMotion 30s linear infinite;
}

@keyframes starsMotion{
  from{transform:translate3d(0,0,0);}
  to{transform:translate3d(-120px,80px,0);}
}

@media (prefers-reduced-motion:reduce){
  .space-layer{animation:none;}
}

.ship-panel{
  width:min(980px,100%);
  max-width:960px;
  background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.00));
  border-radius:var(--radius-2);
  border:1px solid var(--panel-edge);
  padding:clamp(1rem,2.5vw,2rem);
  box-shadow:var(--shadow-1);
  display:grid;
  grid-template-columns:1fr;
  gap:1rem;
  align-items:start;
  position:relative;
  z-index:1;
}

.panel-head{
  display:flex;
  gap:1rem;
  align-items:center;
  
}

.logo-crewmate{
  width:56px;
  height:auto;
  flex:0 0 56px;
  transform-origin:center;
  animation:floatCrew 5s ease-in-out infinite;
  
}

@keyframes floatCrew{
  0%,100%{transform:translateY(0);}
  50%{transform:translateY(-6px);}
}

.title-wrap h1{
  margin:0;
  font-size:clamp(1.125rem,2vw,1.5rem);
  letter-spacing:.6px;
  font-weight:var(--fw-700);
}

.subtitle{
  margin:.2rem 0 0;
  color:var(--muted);
  font-size:var(--fs-sm);
}

.panel-body{
  display:grid;
  gap:.75rem;
  align-items:start;
}

.label{
  display:block;
  font-size:var(--fs-sm);
  color:var(--muted);
  margin-bottom:.35rem;
}

.input-wrap{
  position:relative;
  display:flex;
  align-items:center;
  
}

.input-wrap input[type="number"],
.panel-body input[type="text"],
.panel-body select{
  width:100%;
  
  padding:.9rem 1rem;
  border-radius:.75rem;
  border:1px solid rgba(255,255,255,0.04);
  background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.00));
  color:var(--text);
  font-size:var(--fs-md);
  outline:none;
  transition:box-shadow var(--ease-fast),transform var(--ease-fast),border-color var(--ease-fast);
}

.input-wrap .icon-thermo{
  width:20px;
  height:auto;
  margin-left:-36px;
  margin-right:8px;
  fill:var(--accent-cyan);
  opacity:.95;
  pointer-events:none;
}

.panel-body input:focus,
.panel-body select:focus{
  box-shadow:0 0 0 4px rgba(88,215,240,0.08);
  border-color:rgba(88,215,240,0.55);
}
.field option{
  display:flex;
  flex-direction:column;
  background-color:  rgba(255,255,255,0.04);
  font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
  color: #000;
  
}
.field-msg{
  font-size:.85rem;
  color:var(--accent-yellow);
  min-height:1.2rem;
  margin-top:.25rem;
  
}

.row-2{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:.75rem;
  
}

.panel-advanced summary{
  cursor:pointer;
  font-weight:600;
  color:var(--muted);
  background:transparent;
  border:none;
  padding:.5rem 0;
}

.advanced-grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:.6rem;
  margin-top:.6rem;
}

.actions{
  display:flex;
  gap:.75rem;
  align-items:center;
  margin-top:.25rem;
  flex-wrap:wrap;
}

.btn-emergency{
  display:inline-flex;
  align-items:center;
  gap:.6rem;
  background:linear-gradient(180deg,var(--accent-red),color-mix(in srgb,var(--accent-red) 70%,#000 30%));
  color:white;
  border:none;
  border-radius:1rem;
  padding:.8rem 1rem;
  font-weight:700;
  font-size:var(--fs-md);
  cursor:pointer;
  box-shadow:0 6px 18px rgba(197,17,17,0.28),0 1px 0 rgba(255,255,255,0.03) inset;
  transition:transform var(--ease-fast),filter var(--ease-fast),box-shadow var(--ease-fast);
  will-change:transform;
}

.btn-emergency .icon-emergency{
  width:18px;
  height:auto;
  fill:#fff;
  opacity:.95;
  filter:drop-shadow(0 2px 6px rgba(0,0,0,0.6));
}

.btn-emergency:hover{
  transform:translateY(-3px) scale(1.02);
  filter:saturate(1.05);
  box-shadow:0 12px 28px rgba(197,17,17,0.32);
}

.btn-emergency:active{transform:translateY(0);}

.btn-ghost{
  background:transparent;
  border:1px solid rgba(255,255,255,0.06);
  padding:.6rem .8rem;
  border-radius:.65rem;
  color:var(--text);
}

.badge{
  font-size:.9rem;
  color:var(--muted);
  margin-left:auto;
  display:inline-flex;
  align-items:center;
  gap:.5rem;
}

:focus-visible{
  outline:none;
  box-shadow:0 0 0 4px rgba(88,215,240,0.12);
  border-radius:.5rem;
}

.sidepanel{
  position:fixed;
  right:0;
  top:0;
  height:100dvh;
  width:min(420px,86%);
  background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.00));
  border-left:1px solid var(--panel-edge);
  transform:translateX(110%);
  transition:transform var(--ease-med) ease;
  z-index:60;
  display:flex;
  flex-direction:column;
}

.sidepanel[aria-hidden="false"]{transform:translateX(0);}

.side-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:1rem;
  border-bottom:1px solid var(--panel-edge);
}

.side-body{
  padding:1rem;
  overflow:auto;
}

.popup{
  position:fixed;
  inset:0;
  display:none;
  place-items:center;
  background:rgba(2,6,12,0.6);
  z-index:100;
}

.popup[aria-hidden="false"]{display:grid;}

.popup-frame{
  width:min(720px,calc(100% - 2rem));
  max-width:680px;
  background:linear-gradient(180deg,rgba(10,18,36,0.92),rgba(16,28,48,0.88));
  border-radius:1.1rem;
  padding:1rem;
  border:2px solid rgba(88,215,240,0.06);
  box-shadow:0 14px 44px rgba(0,0,0,0.65);
  transform-origin:center;
  animation:popupIn .24s cubic-bezier(.2,.9,.3,1);
}

@keyframes popupIn{
  from{transform:translateY(12px) scale(.98);opacity:0;}
  to{transform:none;opacity:1;}
}

.popup-head{
  display:flex;
  align-items:center;
  gap:.8rem;
  margin-bottom:.6rem;
}

.icon-visor{
  width:90px;
  height:auto;
  opacity:.96;
}

.popup-body{
  min-height:80px;
  background:linear-gradient(180deg,rgba(255,255,255,0.01),rgba(255,255,255,0));
  border-radius:.6rem;
  padding:1rem;
  color:var(--text);
  font-size:var(--fs-md);
}

.popup-footer{
  display:flex;
  justify-content:flex-end;
  gap:.6rem;
  margin-top:.8rem;
}

@media (max-width:820px){
  .row-2{grid-template-columns:1fr;}
  .advanced-grid{grid-template-columns:1fr;}
  .ship-panel{padding:1rem;}
  .logo-crewmate{width:48px;}
}

@media (max-width:420px){
  .btn-emergency{font-size:.95rem;padding:.65rem .8rem;}
  .logo-crewmate{width:44px;animation-duration:6s;}
}
